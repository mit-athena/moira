# $Id: Makefile.in,v 1.6 2009-01-05 22:25:50 zacheiss Exp $

SHELL=/bin/sh
@SET_MAKE@

CC=@CC@
CPPFLAGS=@CPPFLAGS@
CFLAGS=@CFLAGS@
DEFS=@DEFS@
ALL_CFLAGS=$(CPPFLAGS) $(CFLAGS) $(DEFS)
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@
MR_LIBDEP=@MR_LIBDEP@
INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@

srcdir=@srcdir@
VPATH=@srcdir@
SRCTOP=@top_srcdir@
BUILDTOP=..
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
sbindir=@sbindir@
sysconfdir=@sysconfdir@

SOBJS=	auth_002.o auth_003.o checksum.o config.o exec_002.o get_file.o \
	update_server.o xfer_002.o xfer_003.o sendrecv.o
COBJS=	update_test.o checksum.o client.o send_file.o ticket.o sendrecv.o

TARGET=update_server update_test

.c.o:
	$(CC) -c $(ALL_CFLAGS) $<

all: $(TARGET)

clean:
	rm -f $(SOBJS) $(COBJS) $(TARGET)

cleandir distclean: clean
	rm -f Makefile

depend:

install: all
	$(INSTALL_PROGRAM) update_test $(DESTDIR)$(bindir)
	$(INSTALL_PROGRAM) update_server $(DESTDIR)$(sbindir)
	$(SRCTOP)/mkinstalldirs $(DESTDIR)$(sysconfdir)/athena
	$(INSTALL) -m 644 moira.conf $(DESTDIR)$(sysconfdir)/athena/moira.conf

update_test: $(COBJS) $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) $(COBJS) $(LIBS)

update_server: $(SOBJS) $(MR_LIBDEP)
	$(CC) -o $@ $(LDFLAGS) $(SOBJS) $(LIBS)
